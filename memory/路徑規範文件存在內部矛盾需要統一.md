---
id: path-specification-internal-contradictions
type: issue
title: 路徑規範文件存在內部矛盾需要統一
created: 2025-09-07
tags: [documentation, path-standards, consistency, specification]
---

# 路徑規範文件存在內部矛盾需要統一

## 一句話說明

> format-fix-examples.md 文件內部同時存在 `src/` 和 `./src/` 兩種不同路徑格式規範，導致實施混亂和標準不一致

## 上下文連結

- 基於：[[語意化路徑修正遭遇Jest環境解析失敗危機]]
- 導致：[[實施過程中路徑格式選擇困難]]
- 相關：[[專案規範文件一致性維護需求]]

## 核心內容

### 🔍 **矛盾發現與分析**

#### **矛盾位置識別**

**矛盾範例一**（第58行）：
```javascript
// ✅ 修正後 - 使用 ./src/ 前綴
const BaseModule = require('./src/background/lifecycle/base-module')
```

**矛盾範例二**（第124行）：
```javascript
// ✅ 修正後 - 使用 src/ 前綴（無 ./）
const { BookValidationError } = require('src/core/errors/BookValidationError')
```

**矛盾嚴重性評估**：
- **標準不統一**：同一文件內出現兩種不同標準
- **實施困惑**：無法確定正確的路徑格式
- **可信度損害**：規範文件的權威性受到影響
- **決策延遲**：需要額外時間確認正確標準

### 📋 **修正行動**

#### **已完成的修正**

1. **狀態標記更新**：
   - 將確定性的「✅ 修正後」改為「🔄 待技術確認」
   - 明確標示當前實施狀況為暫停狀態

2. **技術問題說明**：
   - 增加 Jest 環境路徑解析問題的具體說明
   - 提供當前臨時解決方案（維持相對路徑）

3. **雙選項並列**：
   - 同時提供 `src/` 和 `./src/` 兩種格式
   - 標明各自的技術相容性狀況

4. **狀態更新區段**：
   - 在文件末尾新增重要狀態更新區段
   - 提供問題概要、當前決策、下一步行動

#### **修正後的標準表達**

**修正前**（混亂狀態）：
```markdown
✅ 修正後 (After)
const BaseModule = require('./src/background/lifecycle/base-module')

✅ 修正後 (After)  
const { BookValidationError } = require('src/core/errors/BookValidationError')
```

**修正後**（清晰狀態）：
```markdown
🔄 修正目標 (待技術確認)
// 選項A: 使用 src/ 前綴 (當前 Jest 配置支援)
const BaseModule = require('src/background/lifecycle/base-module')

// 選項B: 使用 ./src/ 前綴 (需要修正 Jest 配置)  
const BaseModule = require('./src/background/lifecycle/base-module')

// ⚠️ 最終格式將根據技術可行性評估結果確定
```

### 🎯 **一致性維護原則**

#### **文件標準統一原則**

1. **單一真相來源**：
   - 每個規範只能有一個標準答案
   - 不允許同一文件內出現矛盾標準

2. **狀態明確性**：
   - 使用明確的狀態標記（✅/🔄/❌/⚠️）
   - 狀態標記必須反映真實情況

3. **技術現實性**：
   - 規範必須基於技術可行性
   - 不能提供無法實現的標準

4. **及時更新性**：
   - 發現問題立即更新規範文件
   - 保持規範與實際狀況同步

#### **預防類似問題的機制**

1. **規範文件審查**：
   - 定期檢查規範文件的內部一致性
   - 建立文件品質檢查清單

2. **技術驗證**：
   - 規範制定前必須進行技術可行性驗證
   - 所有範例必須經過實際測試

3. **統一維護責任**：
   - 指定專人負責規範文件的一致性維護
   - 建立規範更新的審批流程

### 📊 **影響範圍評估**

#### **直接影響**

**開發團隊**：
- 實施困惑和決策延遲
- 需要額外時間釐清正確標準
- 影響開發效率

**專案品質**：
- 程式碼風格不一致
- 技術債務可能累積
- 測試通過率受影響

#### **間接影響**

**文件可信度**：
- 其他規範文件的可信度可能受質疑
- 需要重新檢視所有規範文件

**流程改善需求**：
- 需要建立更嚴格的文件品質控制
- 考慮引入自動化規範檢查工具

### 🔧 **後續改善計畫**

#### **短期行動**

1. **完整規範文件審查**：
   - 檢查所有 Claude 規範文件
   - 識別其他可能的矛盾或不一致

2. **技術可行性確認**：
   - 完整測試 Jest 路徑解析配置
   - 確定最終的路徑格式標準

3. **規範文件更新**：
   - 基於技術確認結果更新所有相關文件
   - 確保全專案標準統一

#### **長期機制**

1. **文件品質檢查工具**：
   - 開發自動化工具檢查文件一致性
   - 整合到 CI/CD 流程

2. **規範制定流程**：
   - 建立規範制定的標準流程
   - 包含技術驗證和一致性檢查步驟

3. **定期維護制度**：
   - 建立規範文件的定期審查機制
   - 確保與專案發展同步更新

## 關鍵文件

- `docs/claude/format-fix-examples.md` - 已修正矛盾的規範文件
- `memory/語意化路徑修正遭遇Jest環境解析失敗危機.md` - 相關技術問題記錄
- `package.json` - Jest 配置相關設定